# NEXUS 供应商数据分析系统 - 故障排除指南

## 版本信息

- **系统名称**：NEXUS Global 供应商数据分析和访客追踪系统
- **版本号**：1.0
- **发布日期**：2025-10-23
- **作者**：NEXUS Development Team

## 1. 概述

本文档提供了NEXUS供应商数据分析和访客追踪系统在使用过程中可能遇到的常见问题及其解决方案。在联系技术支持之前，建议您先查阅本文档，尝试自行解决问题。

## 2. 常见问题与解决方案

### 2.1 数据看板无法加载或显示空白

**可能原因**：
1. **网络连接问题**：浏览器无法访问NEXUS平台或Google API。
2. **GA4授权过期或未授权**：系统无法获取GA4数据。
3. **JavaScript错误**：前端脚本执行异常。
4. **localStorage数据损坏**：本地存储的数据出现问题。

**解决方案**：
1. **检查网络连接**：确保您的设备已连接到互联网，并且网络稳定。
2. **重新授权GA4**：
   - 访问数据看板，如果提示授权，请重新完成OAuth授权流程。
   - 如果没有提示，请尝试点击导航栏的"设置"按钮（如果可用），查找重新授权选项。
3. **检查浏览器控制台**：
   - 按 `F12` 打开浏览器开发者工具，切换到"Console"（控制台）标签页。
   - 查找任何红色的错误消息。这些错误通常会指示问题所在。
   - 如果发现错误，请记录错误信息并联系技术支持。
4. **清除浏览器缓存和localStorage**：
   - 按 `F12` 打开浏览器开发者工具，切换到"Application"（应用）标签页。
   - 在左侧菜单中找到"Local Storage"（本地存储），右键点击您的网站域名，选择"Clear"（清除）。
   - 清除后刷新页面，系统将重新加载数据。

### 2.2 GA4数据未更新或显示旧数据

**可能原因**：
1. **数据同步延迟**：GA4数据同步到NEXUS平台需要时间。
2. **GA4 Reporting API调用失败**：由于配额限制、网络问题或API错误导致数据未能成功获取。
3. **GA4数据本身未更新**：GA4后台数据本身存在延迟。

**解决方案**：
1. **手动同步数据**：点击导航栏的"同步"按钮（🔄 图标），强制系统从GA4重新获取最新数据。
2. **检查GA4 Reporting API状态**：
   - 检查浏览器开发者工具的"Network"（网络）标签页，查看对Google API的请求是否成功（状态码200）。
   - 如果有错误，检查响应内容以获取详细错误信息。
   - 确保您的Google Cloud项目没有超出GA4 Reporting API的配额限制。
3. **检查GA4后台**：登录您的Google Analytics (GA4) 账号，检查数据是否在GA4界面中已更新。如果GA4后台数据本身未更新，则NEXUS平台也无法获取最新数据。

### 2.3 Excel导出失败

**可能原因**：
1. **数据量过大**：浏览器内存不足，无法处理大量数据生成Excel文件。
2. **网络问题**：加载SheetJS库失败。
3. **浏览器安全设置**：浏览器阻止文件下载。

**解决方案**：
1. **尝试导出较小范围的数据**：选择较短的日期范围进行导出。
2. **检查网络连接**：确保网络稳定，SheetJS库（`https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js`）能够正常加载。
3. **检查浏览器下载设置**：确保浏览器允许从当前网站下载文件。有时浏览器会阻止自动下载，需要手动点击允许。
4. **检查浏览器控制台**：按 `F12` 打开浏览器开发者工具，查看"Console"（控制台）标签页是否有关于导出失败的错误信息。

### 2.4 事件追踪不准确或缺失

**可能原因**：
1. **GA4追踪脚本未正确部署**：`nexus-ga4-tracker.js` 未加载或配置错误。
2. **事件触发逻辑错误**：网站元素未正确绑定事件监听器。
3. **GA4测量ID配置错误**：`GA4_MEASUREMENT_ID` 未正确设置。

**解决方案**：
1. **验证GA4追踪脚本加载**：
   - 访问您的NEXUS网站页面。
   - 按 `F12` 打开浏览器开发者工具，切换到"Network"（网络）标签页，搜索 `nexus-ga4-tracker.js`，确保其已成功加载。
   - 切换到"Console"（控制台）标签页，检查是否有关于GA4追踪的错误或警告信息。
2. **使用GA4 DebugView**：
   - 登录您的Google Analytics (GA4) 账号，进入"管理" -> "DebugView"。
   - 在您的网站上执行操作，观察DebugView中是否实时显示事件。这可以帮助您诊断事件是否被正确发送到GA4。
3. **检查事件绑定**：如果可能，检查网站代码中事件监听器是否正确绑定到相应的DOM元素。

### 2.5 OAuth授权失败

**可能原因**：
1. **Google Cloud Console配置错误**：客户端ID、重定向URI或授权范围配置不正确。
2. **网络问题**：无法连接到Google授权服务器。
3. **用户拒绝授权**：用户在Google授权页面拒绝了权限请求。

**解决方案**：
1. **核对Google Cloud Console配置**：
   - 仔细检查您的Google Cloud项目中的"OAuth客户端ID"配置，确保"授权的JavaScript来源"和"授权的重定向URI"与您部署的NEXUS网站域名和`ga4-callback.html`的URL完全匹配。
   - 确保已启用"Google Analytics Data API"和"Google Analytics Admin API"。
2. **检查网络连接**：确保您的网络可以访问Google的授权服务器。
3. **重新尝试授权**：如果用户拒绝授权，请确保向用户解释清楚NEXUS平台需要这些权限的原因，并引导用户重新授权。
4. **检查 `ga4-callback.html` 页面**：确保 `ga4-callback.html` 页面能够正常加载，并且没有JavaScript错误。

## 3. 联系技术支持

如果您尝试了以上解决方案仍无法解决问题，请联系您的NEXUS平台管理员或技术支持团队，并提供以下信息，以便我们更快地帮助您：

- **问题描述**：详细说明您遇到的问题、操作步骤和预期结果。
- **错误信息**：提供浏览器控制台（F12 -> Console）中显示的任何错误消息或警告。
- **截图/录屏**：提供问题界面的截图或操作录屏。
- **浏览器和操作系统信息**：例如：Chrome 120 / Windows 11。
- **网络环境**：例如：公司内网 / 家庭宽带。
- **尝试过的解决方案**：您已经尝试过哪些故障排除步骤。

---

**文档版本**：1.0  
**最后更新**：2025-10-23  
**作者**：NEXUS Development Team

